@section META_INC
{
    @Html.Partial("~/Views/Common/_MetaInfo.cshtml", new MetaNewsInfoModel() { Title = ViewBag.Title, Keyword = ViewBag.Keyword, Description = ViewBag.Description, OgImage = ViewBag.Image })
}
@model List<CategoryModel>
<link href="~/Content/bootstrap-select.css" rel="stylesheet" />
<div class="container" id="container">
    <div class="row">
        <div class="col-sm-3">
            @Html.Action("PartialLeftMenu", "Category", new { area = "", id = ViewBag.Id })
        </div>
        <div class="col-sm-7">
            @if (ViewBag.CategoryType == 2)
            {
                <h2 style="position:relative">
                    @ViewBag.CurrTitle
                    <a href="javascript:CreateMap()" class="btn btn-success btn-sm" style="position: absolute;right:0;">
                        <span class="glyphicon glyphicon-map-marker"></span>
                    </a>
                </h2>
            }
            else
            {
                <h2>@ViewBag.CurrTitle</h2>
            }
            <ol class="breadcrumb">
                @foreach (var item in (List<Invest.Core.Category>)ViewBag.TreeMenu)
                {
                    <li typeof="v:Breadcrumb"><a rel="v:url" property="v:title" href="@Url.Action("Index","Category",new { Name = item.Name.ConvertToUnSign(), Id = item.Id})">@item.Name</a></li>
                }
            </ol>
            <div class="row">
                <div class="col-sm-12">
                    <div id="map" style="width:100%;height:500px;display:none"></div>
                </div>
            </div>
            <div class="row">
                @Html.Action("ContentCategory", "Category", new { area = "", id = ViewBag.Id })
            </div>
        </div>
        <div class="col-sm-2 padding_none">
            <div class="col-xs-12 padding_none">
                <h2>Side</h2>
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        Support Online
                        <div class="btn-group pull-right" style="margin-top:-5px;">
                            <a href="#" class="btn btn-success btn-sm"><i class="fa fa-pencil"></i></a>
                            <a href="#" class="btn btn-danger btn-sm"><i class="fa fa-times"></i></a>
                        </div>
                    </div>
                    <div class="panel-body">
                        <img class="img-responsive" src="http://www.investkorea.org/publish/data/main/20140411/1404_SIC2.jpg">
                        <br />
                        <i class="fa fa-envelope-square"></i> vonhatnam@gmai.com
                        <br />
                        <i class="fa fa-phone"></i> 0933 41 30 50
                        <br />
                        <i class="fa fa-skype"></i> vonhatnam
                    </div>
                </div>
                <hr>
                <div class="panel panel-primary">
                    <div class="panel-heading">Parner</div>
                    <div class="panel-body"><img src="http://www.investkorea.org/publish/data/content/921/07/img//140402.jpg" class="img-responsive" /></div>
                </div>
                <hr>
            </div>
        </div>
    </div>
</div>
@section JS_INC{
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?language=vn&sensor=false"></script>
    <script>
        $(document).ready(function () {
            $('.divcenter .thumbnail').hover(
                function () {
                    $(this).find('.caption').slideDown(250);
                },
                function () {
                    $(this).find('.caption').slideUp(250);
                }
            );
        });
        var map;
        var data;
        function CreateMap() {
            $('#map').slideToggle(0);
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 10,
                center: new google.maps.LatLng(10.81820986240789, 106.65886206054688),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });
            $.ajax({
                url: '/ajax/Category/GetAllNewsByCategory',
                data: { iCat: @ViewBag.Id, iPageSize: 1, iPageIndex: 1 },
                type: 'POST',
                cache: false,
                beforeSend: function () {
                },
                success: function (e) {
                    data = e;
                    var bounds = new google.maps.LatLngBounds();
                    for (var i = 0; i < e.length; i++) {
                        var ln = new google.maps.LatLng(e[i].Latitude, e[i].Longitude);
                        bounds.extend(ln);
                        var marker = new google.maps.Marker({
                            position: ln,
                            map: map
                        });
                        google.maps.event.addListener(marker, 'click', (function (marker, i) {
                            return function () {
                                infowindow = new google.maps.InfoWindow({
                                    content: data[i].Title
                                });
                                infowindow.open(map, marker);
                            }
                        })(marker, i));
                    };
                    map.fitBounds(bounds);
                },
                error: function () {
                }
            });

        }
    </script>
}